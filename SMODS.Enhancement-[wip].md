# API Documentation: SMODS.Enhancement
- **Required parameters:**
	- `key`
- **Optional parameters** *(defaults)*:
	- `atlas = 'centers'`,
	- `pos = {x = 0, y = 0}`,
	~~- `discovered = false`, UNSUPPORTED~~
	~~- `unlocked = true`, -- UNSUPPORTED~~
	- `loc_txt`, uses the standard skeleton, omit if using localization files
    - `replace_base_card`, if `true`, don't draw base card sprite or give base card chips
    - `no_rank`, if `true`, enhanced card has no rank
    - `no_suit`, if `true`, enhanced card has no suit
    - `overrides_base_rank`, if `true`, enhancement cannot be generated by Grim, Familiar and Incantation *(enhancements with `no_rank` set to true are automatically assigned this property)*
    - `any_suit`, if `true`, enhanced card counts as any suit
    - `always_scores`, if `true`, enhanced card always counts in scoring
	- `weight`, the weighting of the enhancement, follows same rules as other weighted objects *(default weight is 5)*

    - `config`, supported values that will be calculated and scored automatically:
	```lua
		{
			bonus,
            bonus_chips,
			mult,
			x_mult,
			p_dollars,
            h_mult,
            h_x_mult,
		}
	```

## API methods
- `loc_vars(self, info_queue, card) -> { vars ?= table }`
	- Used for passing variables to enhancement descriptions.
- `get_weight(self) ->  number `
	- Used to modify the weight of enhancement on certain conditions.
- `calculate(self, card, context, effect)`
    - Calculation for enhancements works slightly differently to other center objects. There is no return location for the method, so the `effect` table needs to be modified directly. An example of this would be,
    ```lua
    calculate = function(self, card, context, effect)
        if context.cardarea == G.play and not context.repetition then
            effect.x_mult = card.ability.extra.x_mult
        end
    end
    ```

## Util methods
- `SMODS.poll_enhancement(args)` *(defaults)*
	- `args.key`, the key used to generate the seed
    - `args.type_key`, an optional key used to generate the specific enhancement seed
    - `args.mod`, multiplying modifier to the base rate (40%)
    - `args.guaranteed`, if `true`, enhancement is guaranteed
    - `args.options`, can be used to provide fixed options to the pool
        - `{ keys }`, a table of keys as strings, respects original weight values
        - `{ {key = string, weight = number} }`, a table of tables, with key and weight pairs